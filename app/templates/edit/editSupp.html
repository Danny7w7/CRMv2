{% extends "dashboard/index.html" %}
{% load static %}
{% block head %}
    <title>Client Supplemental</title>
	<!--plugins-->
	<link href="{% static "assets/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/metismenu/css/metisMenu.min.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/datatable/css/dataTables.bootstrap5.min.css" %}" rel="stylesheet" />
	<!-- loader-->
	<link href="{% static "assets/css/pace.min.css" %}" rel="stylesheet" />
	<script src="{% static "assets/js/pace.min.js" %}"></script>
	<!-- Bootstrap CSS -->
	<link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/bootstrap-extended.css" %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&amp;display=swap" rel="stylesheet">
	<link href="{% static "assets/css/app.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/icons.css" %}" rel="stylesheet">

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
	
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="{% static 'assets/css/dark-theme.css' %}"/>
	<link rel="stylesheet" href="{% static 'assets/css/semi-dark.css' %}"/>
	<link rel="stylesheet" href="{% static 'assets/css/header-colors.css' %}"/>

	<!-- Choise Style CSS -->
	<link rel="stylesheet" href="{% static 'assets/css/choiseFromEdit.css' %}" />

	<!-- Custom styles -->
	<link rel="stylesheet" href="{% static 'assets/css/floatingSms.css' %}">

{% endblock %}
{% block page_content %}
<h6 class="mb-0 text-uppercase">Client supplemental</h6>
<hr/>
<div class="row">
    <div class="col-xl-10 mx-auto">
        <div class="card">
            <div class="card-body p-4">
                <form class="row g-3 needs-validation" method="POST">
                    <h4>Client</h4>
                    
					<div class="col-12 col-lg-4">
						<label for="first_name" class="form-label">First Name</label>
						<input type="text" class="form-control" name="first_name" id="first_name" placeholder="First Name" value="{{supps.client.first_name}}" required>
						<input hidden class="form-control" name="id_client" id="id_client" value="{{supps.client.id}}">
					</div>
					<div class="col-12 col-lg-4">
						<label for="last_name" class="form-label">Last Name</label>
						<input type="text" class="form-control" name="last_name" id="last_name" placeholder="Last Name" value="{{supps.client.last_name}}" required>
					</div>
					<div class="col-12 col-lg-4">
						<label for="phone_number" class="form-label">Phone Number</label>
						<input type="number" class="form-control" name ="phone_number" id="phone_number" placeholder="Phone Number" value="{{supps.client.phone_number}}" readonly required>
					</div>
					<div class="col-12 col-lg-5">
						<label for="email" class="form-label">E-mail Address</label>
						<input type="email" class="form-control" name="email" id="email" placeholder="Enter Email Address" value="{{supps.client.email}}" required>
					</div>
					<div class="col-12 col-lg-5">
						<label for="address" class="form-label">Address</label>
						<input type="text" class="form-control" name="address" id="address" placeholder="Address" value="{{supps.client.address}}" required>
					</div>
					<div class="col-12 col-lg-2">
						<label for="zipcode" class="form-label">zipCode</label>
						<input type="number" class="form-control" name ="zipcode" id="zipcode" placeholder="ZIP-CODE" value="{{supps.client.zipcode}}" required>
					</div>
					<div class="col-12 col-lg-4">
						<label for="city" class="form-label">City</label>
						<input type="text" class="form-control" name ="city" id="city" value="{{supps.client.city}}" required readonly>
					</div>
					<div class="col-12 col-lg-2">
						<label for="state" class="form-label font-weight-bold">State</label>
						<input type="text" class="form-control" name ="state" id="state" value="{{supps.client.state}}" readonly required>
					</div>
					<div class="col-12 col-lg-4">
						<label for="county" class="form-label">County</label>
						<input type="text" class="form-control" name ="county" id="county"  value="{{supps.client.county}}" readonly required>
					</div>
					<div class="col-12 col-lg-2">
						<label for="sex" class="form-label">Sex</label>
						<select class="form-select"  name="sex" id="sex" aria-label="Default select example" required>
							<option value="" disabled selected>Please Select</option>
							<option value="M" {% if supps.client.sex == "M" %}selected{% endif %} >MALE</option>
							<option value="F" {% if supps.client.sex == "F" %}selected{% endif %} >FEMALE</option>
						</select>
					</div>
					<div class="col-12 col-lg-2">
						<label for="old" class="form-label">Age</label>
						<input type="number" nim="1" class="form-control" name ="old" id="old" value="{{old}}" readonly>
					</div>
					<div class="col-12 col-lg-3">
						<label for="date_birth" class="form-label">Date Birth</label>
						<input type="text" class="form-control" name="date_birth" id="date_birth" value="{{ supps.client.date_birth|date:'m/d/Y' }}" required >
					</div>
					<div class="col-12 col-lg-7">
						<label for="migration_status" class="form-label">Migration Status</label>
						<select class="form-select" id="migration_status"  name="migration_status" required  >
							<option value="" disabled selected>Please Select</option>
							<option value="N/A" {% if   supps.client.migration_status == "N/A" %}selected{% endif %} >N/A</option>
							<option value="EMPLOYMENT AUTHORIZATION" {% if   supps.client.migration_status == "EMPLOYMENT AUTHORIZATION" %}selected{% endif %} >Employment Authorization</option>
							<option value="NOTICE OF ACTION" {% if   supps.client.migration_status == "NOTICE OF ACTION" %}selected{% endif %} >Notice of Action (i-797)</option>
							<option value="REFUGEE" {% if  supps.client.migration_status  == "REFUGEE" %}selected{% endif %} >Refugee</option>
							<option value="ASYLUM" {% if supps.client.migration_status  == "ASYLUM" %}selected{% endif %} >Asylum</option>
							<option value="TPS" {% if supps.client.migration_status == "TPS" %}selected{% endif %} >Temporary Protection Status (TPS)</option>
							<option value="DOMESTIC VIOLENCE" {% if supps.client.migration_status == "DOMESTIC VIOLENCE" %}selected{% endif %} >Domestic Violence</option>
							<option value="PERMANENT RESIDENT" {% if supps.client.migration_status == "PERMANENT RESIDENT" %}selected{% endif %} >Permanent Resident (Green Card)</option>
							<option value="CONDITIONAL RESIDENT" {% if supps.client.migration_status  == "CONDITIONAL RESIDENT" %}selected{% endif %} >Conditional Resident</option>
							<option value="PAROLE" {% if supps.client.migration_status  == "PAROLE" %}selected{% endif %} >Parole</option>
							<option value="US CITIZEN" {% if supps.client.migration_status  == "US CITIZEN" %}selected{% endif %} >US Citizen (Driver's License)</option>
							<option value="STUDENT VISA" {% if supps.client.migration_status  == "STUDENT VISA" %}selected{% endif %} >Student Visa (I-20)</option>
							<option value="CURRENTLY IN PROCESS" {% if supps.client.migration_status  == "CURRENTLY IN PROCESS" %}selected{% endif %} >Currently In Process (this means the client received an i-797)</option>
						</select>
					</div>
					<div class="col-12 col-lg-5">
						<label for="agent_usa" class="form-label font-weight-bold">Agente USA</label>
						{% if request.user.company != supps.client.company %}
							<input readonly type="text" class="form-control" value="{{ supps.client.agent_usa }}" >
						{% else %}
							<select class="form-select" id="agent_usa" aria-label="Default select example" name="agent_usa" required >
								{% for agentUsa in agentUsa %}
									<option {% if supps.client.agent_usa == agentUsa.name %}selected{% endif %} value="{{agentUsa.name}}">{{agentUsa.name}}</option>
								{% endfor %}
							</select>
						{% endif %}
					</div>
					<div class="col-12 col-lg-2">
						<label for="apply" class="form-label">Apply</label>
						<select class="form-select" id="apply"  name="apply" >
							<option value="" disabled selected>Please Select</option>
							<option value = True {% if supps.client.apply == True %}selected{% endif %} >SI</option>
							<option value = False {% if supps.client.apply == False %}selected{% endif %} >NO</option>
						</select>
					</div>
					<div class="col-12 col-lg-5">
						<label for="social_security" class="form-label">Social Security</label>
						<div class="input-group">
							<input type="text" class="form-control" name="social_security" id="social_security" value="{{formatted_social}}"  disabled data-client-id="{{ supps.client.id }}">
							<button id="show-full-social" type="button" class="btn btn-secondary">
								<i class="lni lni-eye"></i>
							</button>
							<button hidden type="button" id="save-social" class="btn btn-success">
								<i class="lni lni-save"></i>
							</button>
							<button hidden type="button" id="block-social" class="btn btn-danger">
								<i class="lni lni-lock"></i> 
							</button>
						</div>
					</div>
                    <hr>
					{% if dependents %}
                   	 <h4>Dependents</h4>					
					{% endif %}
						{% for dependent in dependents %}
							<div class="col-12 col-lg-6">
								<label class="form-label">Name of Dependent #{{ forloop.counter }}</label>
								<input type="hidden" name="dependentId_{{ dependent.id }}" value="{{ dependent.id }}">
								<input type="text" class="form-control" name="nameDependent_{{ dependent.id }}" value="{{ dependent.name }}" required >
							</div>
							<div class="col-12 col-lg-2">
								<label class="form-label">Apply</label>
								<select class="form-select" name="applyDependent_{{ dependent.id }}" required >
									<option value="" disabled selected>Please Select</option>
									<option value="SI" {% if dependent.apply == "SI" %}selected{% endif %}>SI</option>
									<option value="NO" {% if dependent.apply == "NO" %}selected{% endif %}>NO</option>
								</select>
							</div>
							<div class="col-12 col-lg-4">
								<label class="form-label">Sex</label>
								<select class="form-select" name="sexDependent_{{ dependent.id }}" required >
									<option value="" disabled selected>Please Select</option>
									<option value="M" {% if dependent.sex == "M" %}selected{% endif %}>MALE</option>
									<option value="F" {% if dependent.sex == "F" %}selected{% endif %}>FEMALE</option>
								</select>
							</div>
							<div class="col-12 col-lg-3">
								<label for="kinship" class="form-label">Relationship</label>
								<select class="form-select" id="kinship" name="kinship_{{ dependent.id }}" aria-label="Default select example" required>
									<option value="" disabled selected>Please Select</option>
									<option value="DAD" {% if dependent.kinship == 'DAD' %}selected{% endif %}>DAD</option>
									<option value="MOM" {% if dependent.kinship == 'MOM' %}selected{% endif %}>MOM</option>
									<option value="SON" {% if dependent.kinship == 'SON' %}selected{% endif %}>SON</option>
									<option value="GRANDPARENT" {% if dependent.kinship == 'GRANDPARENT' %}selected{% endif %}>GRANDPARENT</option>
									<option value="GRANDMOTHER" {% if dependent.kinship == 'GRANDMOTHER' %}selected{% endif %}>GRANDMOTHER</option>
									<option value="COUPLE" {% if dependent.kinship == 'COUPLE' %}selected{% endif %}>COUPLE</option>
									<option value="UNKNOWN" {% if dependent.kinship == 'UNKNOWN' %}selected{% endif %}>UNKNOWN</option>
								</select>
							</div>
							<div class="col-12 col-lg-3">
								<label class="form-label">Date Birth</label>
								<input type="text" class="form-control" id="dateBirthDependent"  name="dateBirthDependent_{{ dependent.id }}"  value="{{ dependent.date_birth|date:'m/d/Y' }}" required>
							</div>
							<div class="col-12 col-lg-6">
								<label class="form-label">Migration Status</label>
								<select class="form-select" name="migrationStatusDependent_{{ dependent.id }}" required>
									<option value="" disabled selected>Please Select</option>
									<option value="EMPLOYMENT AUTHORIZATION" {% if   dependent.migration_status == "EMPLOYMENT AUTHORIZATION" %}selected{% endif %} >Employment Authorization</option>
									<option value="NOTICE OF ACTION" {% if   dependent.migration_status == "NOTICE OF ACTION" %}selected{% endif %} >Notice of Action (i-797)</option>
									<option value="REFUGEE" {% if  dependent.migration_status  == "REFUGEE" %}selected{% endif %} >Refugee</option>
									<option value="ASYLUM" {% if dependent.migration_status  == "ASYLUM" %}selected{% endif %} >Asylum</option>
									<option value="TPS" {% if dependent.migration_status == "TPS" %}selected{% endif %} >Temporary Protection Status (TPS)</option>
									<option value="DOMESTIC VIOLENCE" {% if dependent.migration_status == "DOMESTIC VIOLENCE" %}selected{% endif %} >Domestic Violence</option>
									<option value="PERMANENT RESIDENT" {% if dependent.migration_status == "PERMANENT RESIDENT" %}selected{% endif %} >Permanent Resident (Green Card)</option>
									<option value="CONDITIONAL RESIDENT" {% if dependent.migration_status  == "CONDITIONAL RESIDENT" %}selected{% endif %} >Conditional Resident</option>
									<option value="PAROLE" {% if dependent.migration_status  == "PAROLE" %}selected{% endif %} >Parole</option>
									<option value="US CITIZEN" {% if dependent.migration_status  == "US CITIZEN" %}selected{% endif %} >US Citizen (Driver's License)</option>
									<option value="STUDENT VISA" {% if dependent.migration_status  == "STUDENT VISA" %}selected{% endif %} >Student Visa (I-20)</option>
									<option value="CURRENTLY IN PROCESS" {% if dependent.migration_status  == "CURRENTLY IN PROCESS" %}selected{% endif %} >Currently In Process (this means the client received an i-797)</option>
									<option value="UNKNOWN" {% if dependent.migration_status  == "UNKNOWN" %}selected{% endif %} >UNKNOWN</option>
								</select>
							</div>
							<hr>
						{% endfor %}
                    <H4>Plan</H4>
						<div class="col-12 col-lg-6">
							<label for="agent_usa" class="form-label font-weight-bold">Agente USA</label>
							{% if request.user.company != supps.company %}
								<input readonly type="text" class="form-control" value="{{ supps.agent_usa }}" >
							{% else %}
								<select class="form-select" id="agent_usa" aria-label="Default select example" name="agent_usa" required>
									<option value="" disabled selected>Please Select</option>
									{% for agentUsa in agentUsa %}
										<option {% if supps.agent_usa == agentUsa.name %}selected{% endif %} value="{{agentUsa.name}}">{{agentUsa.name}}</option>
									{% endfor %}
								</select>
							{% endif %}
						</div>
						<div class="col-12 col-lg-2">
							<label for="effectiveDateSupp" class="form-label">Effective Date</label>
							<input type="text" class="form-control" id="effectiveDateSupp"  name="effectiveDateSupp"  value="{{ supps.effective_date|date:'m/d/Y'}}" >
						</div>
						<div class="col-12 col-lg-4">
							<label for="carrierSuple" class="form-label">Carrier</label>
							<select class="form-select" id="carrierSuple"  aria-label="Default select example" name="carrierSuple" required>
								<option value="" disabled selected>Please Select</option>
								<option value="AFLAC" {% if supps.carrier == 'AFLAC' %}selected{% endif %}> AFLAC</option>                             
								<option value="AETNA" {% if supps.carrier == 'AETNA' %}selected{% endif %}> AETNA </option>
								<option value="ALLSTATE HEALTH SOLUTIONS" {% if supps.carrier == 'ALLSTATE HEALTH SOLUTIONS' %}selected{% endif %}> ALLSTATE HEALTH SOLUTIONS </option>  
								<option value="COMBINED" {% if supps.carrier == 'COMBINED' %}selected{% endif %}> COMBINED </option>
								<option value="CIGNA" {% if supps.carrier == 'CIGNA' %}selected{% endif %}> CIGNA </option>    
								<option value="MANHATTAN LIFE" {% if supps.carrier == 'MANHATTAN LIFE' %}selected{% endif %}> MANHATTAN LIFE </option>
								<option value="METLIFE" {% if supps.carrier == 'METLIFE' %}selected{% endif %}> METLIFE </option>
								<option value="OSCAR" {% if supps.carrier == 'OSCAR' %}selected{% endif %}> OSCAR</option> 
								<option value="PIVOT" {% if supps.carrier|default:'' == 'PIVOT' %}selected{% endif %}>PIVOT</option>  
								<option value="SUREBRIDGE" {% if supps.carrier == 'SUREBRIDGE' %}selected{% endif %}> SUREBRIDGE </option>    
								<option value="UNITED" {% if supps.carrier == 'UNITED' %}selected{% endif %}> UNITED </option>    
								</select>
						</div>
						<div class="col-12 col-lg-3">
							<label for="premiumSupp" class="form-label">Premium</label>
							<input type="number" class="form-control" step="0.01"  id="premiumSupp" value="{{ supps.premium }}"  name="premiumSupp" >
						</div>
						<div class="col-12 col-lg-4">
							<label for="preventiveSupp" class="form-label">Preventive</label>
							<select class="form-select" id="preventiveSupp"  name="preventiveSupp" aria-label="Default select example" required>
								<option selected disable></option>								
								<option value="N/A" {% if supps.preventive == 'N/A' %}selected{% endif %}>N/A </option>
								<option value="60" {% if supps.preventive == '60' %}selected{% endif %}>60% </option>
								<option value="100" {% if supps.preventive == '100' %}selected{% endif %}>100%</option>
								<option value="SIN ESPERA" {% if supps.preventive == 'SIN ESPERA' %}selected{% endif %}>Sin Espera</option>
							</select>
						</div>
						<div class="col-12 col-lg-5">
							<label for="policyTypeSupp" class="form-label">Policy Type</label>
							<input type="text" class="form-control" id="policyTypeSupp" name="policyTypeSupp" value="{{ supps.policy_type }}" disabled >
						</div>					
						<div class="col-12 col-lg-2">
							<label for="coverageSupp" class="form-label">Coverage</label>
							<select class="form-select" id="coverageSupp"  name="coverageSupp" aria-label="Default select example" required>
								<option value="" disabled selected>Please Select</option>
								<option value="N/A" {% if supps.coverage == 'N/A' %}selected{% endif %}>N/A </option>
								<option value="0" {% if supps.coverage == '0' %}selected{% endif %} >0</option>
								<option value="500" {% if supps.coverage == '500' %}selected{% endif %} >500</option>
								<option value="750" {% if supps.coverage == '750' %}selected{% endif %} >750</option>
								<option value="1000" {% if supps.coverage == '1000' %}selected{% endif %} >1000</option>
								<option value="1500" {% if supps.coverage == '1500' %}selected{% endif %} >1500</option>
								<option value="2000" {% if supps.coverage == '2000' %}selected{% endif %} >2000</option>
								<option value="2500" {% if supps.coverage == '2500' %}selected{% endif %} >2500</option>
								<option value="3000" {% if supps.coverage == '3000' %}selected{% endif %} >3000</option>
								<option value="3500" {% if supps.coverage == '3500' %}selected{% endif %} >3500</option>
								<option value="4000" {% if supps.coverage == '4000' %}selected{% endif %} >4000</option>
								<option value="4500" {% if supps.coverage == '4500' %}selected{% endif %} >4500</option>
								<option value="5000" {% if supps.coverage == '5000' %}selected{% endif %} >5000</option>
								<option value="10000" {% if supps.coverage == '10000' %}selected{% endif %} >10000</option>
							</select>
						</div>
						<div class="col-12 col-lg-2">
							<label for="deducibleSupp" class="form-label">Deducible</label>
							<select class="form-select" id="deducibleSupp"  name="deducibleSupp"  aria-label="Default select example">
								<option value="" disabled selected>Please Select</option>
								<option value="100" {% if supps.deducible == '100' %}selected{% endif %} >100</option>
									<option value="50" {% if supps.deducible == '50' %}selected{% endif %} >50</option>
									<option value="0" {% if supps.deducible == '0' %}selected{% endif %} >0</option>
									<option value="N/A" {% if supps.deducible == 'N/A' %}selected{% endif %}>N/A </option>
							</select>
						</div>
						<div class="col-12 col-lg-5">
							<label for="statusSupp" class="form-label">Status</label>
							<select class="form-select" id="statusSupp"  name="statusSupp"  aria-label="Default select example">
								<option value="" disabled selected>Please Select</option>
									{% for  list_drow in list_drow %}
										<option value="{{list_drow.profiling_supp}}" {% if supps.status == list_drow.profiling_supp %}selected{% endif %} >{{list_drow.profiling_supp}}</option>                      
									{% endfor %}						
							</select>
						</div>
						<div class="col-12 col-lg-3">
							<label for="policyNumber" class="form-label">Policy Number</label>
							<input type="text" class="form-control" name="policyNumber" id="policyNumber" value="{{supps.policyNumber|default_if_none:''}}">
						</div>
						<div class="col-12 col-lg-4">
							<label for="typePaymeSupp" class="form-label">Type Paymet</label>
							<select class="form-select" id="typePaymeSupp"  name="typePaymeSupp"  aria-label="Default select example">
								<option value="" disabled selected>Please Select</option>
								<option value="CARD" {% if supps.payment_type == 'CARD' %}selected{% endif %} >CARD</option>
								<option value="BANK ACCOUNT" {% if supps.payment_type == 'BANK ACCOUNT' %}selected{% endif %} >BANK ACCOUNT</option>
							</select>
						</div>
						<div class="col-12 col-lg-4">
							<label for="date_effective_coverage" class="form-label">Date Effective Coverage</label>
							<input type="text" class="form-control" name="date_effective_coverage" id="date_effective_coverage" value="{{supps.date_effective_coverage|date:'m/d/Y'}}" >
						</div>
						<div class="col-12 col-lg-4">
							<label for="date_effective_coverage_end" class="form-label">Date Effective Coverage End</label>
							<input type="text" class="form-control" name="date_effective_coverage_end" id="date_effective_coverage_end" value="{{supps.date_effective_coverage_end|date:'m/d/Y'}}" >
						</div> 
						<div class="col-12 col-lg-6">
							<label for="observationSuple" class="form-label">Observation</label>
							<textarea class="form-control" id="observationSuple" name="observationSuple" rows="3" type="text" style="resize: none">{{supps.observation}}</textarea>
						</div>
						<div class="col-12 col-lg-6">
							<label for="observationObama" class="form-label">Observation Agent</label>
							<textarea class="form-control" id="observationObama" name="observationObama" disabled rows="3" style="resize: none">{{ obsSuppText }}</textarea>
						</div>
						{% if request.user.role == 'A' %}
						<div class="col-12 col-lg-6" id="obs_agent">
							<label for="obs_agent" class="form-label">OBS. AGENT</label>
							<input type="text" class="form-control" id="obs_agent" name="obs_agent"  >
						</div> 
						{% endif %}
                    <hr> 					                  
                    <div class="col-md-12">
                        <div class="d-md-flex d-grid align-items-center gap-3">
							<button type="submit" name="action" value="save_supp" id="enviar" class="btn btn-primary px-4"  >Submit</button>
							<button type="submit" name="action" id="enviar2" value="save_supp_agent" class="btn btn-primary px-4" style="display: none;">Submits</button>                            
							<a href="{% url 'clientSupp' %}" class="btn btn-light px-4">Back</a>
							<a class="btn btn-light px-4" data-bs-toggle="modal" data-bs-target="#verDocument">Document</a>
							{% if request.user.role == 'SUPP' or request.user.role == 'Admin' %}
								<a class="btn btn-light px-4" data-bs-toggle="modal" data-bs-target="#verCignaSuplemental">View Cigna Suplemental</a>
							{% endif %}
                        </div>
                    </div>
                    {% csrf_token %}	
                </form>
				<hr>
				
				<div id="password-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
					<div style=" padding: 20px; max-width: 400px; margin: 100px auto; border-radius: 8px; text-align: center;">
						<h3>Ingresa la clave</h3>
						<input type="password" id="password-input" class="form-control" placeholder="Clave" style="margin: 10px 0; width: 100%;">
						<button id="submit-password" class="btn btn-primary">Enviar</button>
						<button id="cancel-password" class="btn btn-secondary">Cancelar</button>
					</div>
				</div>

				<h5>Type Entry:</h5>
				<div class="col-12 col-lg-12">
					<div class="row row-cols-auto g-3">
						{% if request.user.role != 'A' %}
							<!-- Botones para abrir los modales -->
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalIngresarTexto">
								Enter Observation
							</button>
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalPayments">
								Payments
							</button>
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalPaymentsDate">
								Date Payment
							</button>
						{% endif %}
						<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalDocument">
							Documents
						</button>
						{% if request.user.role == 'SUPP' or request.user.role == 'Admin' %}
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalDocument">
								View Cigna Suplemental
							</button>
						{% endif %}

						<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#AgentTicketAssignment">
							Ticket
						</button>
						{% if request.user.role == 'SUPP' or request.user.role == 'Admin' %}
							<a href="{% url 'cignaSuplemental' supps.id %}" class="btn btn-primary me-2">Autorizacion Cigna</a>						
						{% endif %}
						<button type="button" class="btn btn-secondary me-2" data-bs-toggle="modal" data-bs-target="#modalVerTexto">
							See Observations
						</button>

					</div>
			
					<!-- Modal para ingresar texto -->
					<div class="modal fade" id="modalIngresarTexto" tabindex="-1" aria-labelledby="modalIngresarTextoLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalIngresarTextoLabel">Enter Observation</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="formIngresarTexto" action="{% url 'saveCustomerObservationSupp' %}" method="POST">
										{% csrf_token %}
										<input type="hidden" name="supp_id" value="{{ supps.id }}">
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Text:</label>
											<textarea class="form-control" id="textoIngresado" name="textoIngresado" rows="4" required></textarea>
										</div>
										<div class="mb-3">
											<label for="observaciones" class="form-label">Typification:</label>
											<select class="form-select"  name="observaciones[]"  id="observaciones" multiple required>
												<option value="1095-A">1095-A</option>
												<option value="AUDITED">Audited</option>
												<option value="ACTIVE">Active</option>
												<option value="CANCEL">Cancel</option>
												<option value="PLAN CHANGE">Plan Change</option>
												<option value="AGENT CHANGE">Agent Change</option>
												<option value="T/C CHANGE">T/C Change</option>
												<option value="CARRIER">Carrier</option>
												<option value="APPOINTMENTS">Appointments</option>
												<option value="SATISFIED CUSTOMER">Satisfied Customer</option>
												<option value="CORRECTION">Correction</option>
												<option value="PAYMENT ERROR CORRECTION">Payment Error Correction</option>
												<option value="PORTAL CREATION">Portal/Member ID/Brochure Creation</option>
												<option value="DEMOGRAPHIC DATA">Demographic Data</option>
												<option value="DOCUMENTS IN SHERPA">Documents in Sherpa</option>
												<option value="DOCUMENTS RECEIVED">Documents Received</option>
												<option value="ID CARD SEND">ID Card Send</option>
												<option value="DENTIST LISTING">Dentist listing</option>
												<option value="OPTOMETER LISTING">Optometer Listing</option>
												<option value="PLAN EXPLANATION">Plan Explanation</option>
												<option value="OUT OF SERVICE">Out of Service</option>
												<option value="HEALTHSAFE ID">HEALTHSAFE ID</option>
												<option value="ID MEMBER">ID Member</option>
												<option value="ID SUPERVISOR">ID Supervisor</option>
												<option value="CARRIER SUP CALL">Carrier Supervisor Call</option>
												<option value="EFFECTIVE MANAGEMENT">Effective Management</option>
												<option value="WELCOME MESSAGE">Welcome Message</option>
												<option value="INFORMATIVE MESSAGE">Informative Message</option>
												<option value="NO ANSWER">No Answer</option>
												<option value="OTHER PARTY">Other Party</option>
												<option value="DENTAL PAYMENT UHC">Dental Payment via UHC</option>
												<option value="VISION PAYMENT UHC">Vision Payment via UHC</option>
												<option value="CARRIER ACA PORTAL">Carrier ACA Portal</option>
												<option value="CARD RECEIPT">Card Receipt</option>
												<option value="RECOVERED">Recovered</option>
												<option value="REFERAL">Referal</option>
												<option value="ROLLED OVER">Rolled Over</option>
												<option value="PREMIUM PAYMENT">Premium Payment</option>
												<option value="PCP">PCP</option>
												<option value="REQUEST DOCUMENTS">Request Documents</option>
												<option value="SUPPLEMENTARY">Supplemental</option>
												<option value="TRANSFER">Transfer</option>
												<option value="UHC ID READY">UHC ID Ready</option>
												<option value="CALL BACK">Call Back</option>
												<option value="INFORMATIVE CALLS ACA SUP">Informative Calls ACA/Supplementaries</option>
												<option value="HANGS UP">Hangs Up</option>
											</select>
										</div>
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Typification the Call:</label>
											<select class="form-select"  name="typeCall" required >
												<option></option>
												<option value="INBOUND" >Inbound </option>
												<option value="OUTBOUND" >Outbound </option>
												<option value="WHATSAPP" >WhatsApp</option>
												<option value="TXT MESSAGE" >Txt Message</option>
												<option value="SHERPA" >Sherpa</option>
											</select>
										</div>
										<button type="submit" class="btn btn-primary">Guardar</button>
									</form>
									
								</div>
							</div>
						</div>
					</div>
			
					<!-- Modal para ver las observaciones -->
					<div class="modal fade" id="modalVerTexto" tabindex="-1" aria-labelledby="modalVerTextoLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalVerTextoLabel">Saved Remarks</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if obsCustomer %}
										<ul class="list-group">
											{% for observation in obsCustomer %}
												<li class="list-group-item">
													<strong>{{ observation.agent }}:</strong> {{ observation.content }} <strong>Date:</strong> {{ observation.created_at }}
												</li>
											{% endfor %}
										</ul>
									{% else %}
										<p>No hay observaciones guardadas.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver los pagos -->
					<div class="modal fade" id="modalPayments" tabindex="-1" aria-labelledby="modalPayments" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verAppointment">Enter Payments</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<div class="table-responsive" >
										<table id="paymentsTable" class="table table-striped table-hover table-bordered shadow-sm centerAllExceptFirst">
											<thead>
												<tr>
													<th>Month</th>
													<th>Status</th>
													<th>Payments</th>
												</tr>
											</thead>
											<tbody>
												{% for month, values in paymentsSummary.items %}
												<tr>
													<td>{{ month }}</td>
													<td>
														{% if values.status == True%}✅
														{% elif values.status == False %}❌
														{% else %}❔
														{% endif %}
													</td>
													<td>
														{% if values.payment == True%}✅
														{% elif values.payment == False %}❌
														{% else %}❔
														{% endif %}
													</td>
												</tr>
												{% endfor %}
											</tbody>
										</table>
									</div>
									
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-primery" data-bs-toggle="modal" data-bs-target="#modalChildEnterStatus">
										Enter Status
									</button>
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ingresar Status -->
					<div class="modal fade" id="modalChildEnterStatus" tabindex="-1" aria-labelledby="modalChildEnterStatus" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title">Enter Status</h5>
									<button type="button" class="btn-primary" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="formStatus">
										<div class="mb-3">
											<label for="" class="form-label">Month</label>
											<input type="month" class="form-control" name="coverageMonth" required>
										</div>
										<div class="mb-3">
											<label for="" class="form-label">Status</label>
											<select class="form-select" name="status" required>
												<option value='' disabled selected>Select one</option>
												<option value="active">Active</option>
												<option value="inactive">Inactive</option>
											</select>
										</div>
										<button type="submit" class="btn btn-primary">Save</button>
									</form>
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ingresar fecha de recordatorio de pago -->
					<div class="modal fade" id="modalPaymentsDate" tabindex="-1" aria-labelledby="modalPaymentsDateLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalAppointmentLabel">Enter Collection Message Date</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="paymentDateSupp" action="{% url 'paymentDateSupp' supps.id %}" method="POST">
										{% csrf_token %}
										<div class="mb-3">
											<label for="paymentDate" class="form-label">Collection reminder date:</label>
											<input type="text" class="form-control" name="paymentDate" id="paymentDate" required >
											{% if paymentDateSupp %}
												<label for="">📌 Collection date: <strong>{{paymentDateSupp.payment_date}}</strong> </label>
											{% endif %}
										</div>
										<div class="d-flex justify-content-between">
											<button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#modalSelector" data-bs-dismiss="modal">
												Back
											</button>
											<button type="submit" class="btn btn-primary">Saved</button>
										</div>
									</form>
									
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ingresar ticket de agent a customer -->
					<div class="modal fade" id="AgentTicketAssignment" tabindex="-1" aria-labelledby="AgentTicketAssignmentLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="AgentTicketAssignmentLabel">Enter Observation</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="formIngresarTexto" action="{% url 'agentTicketAssignment' %}" method="POST">
										{% csrf_token %}
										<input type="hidden" name="supp_id" value="{{ supps.id }}">
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Text:</label>
											<textarea class="form-control" id="textoIngresado" name="textoIngresado" rows="4" required style="resize: none;"></textarea>
										</div>
										<div class="mb-3">
											<label for="agent_customer" class="form-label">Agent to assign:</label>
											<select class="form-select"  name="agent_customer" id="agent_customer" >
												<option value="no_valid" disabled selected>Please Select</option>
												{% for user  in users %}												
													<option value="{{user.id}}">{{user.first_name}} {{user.last_name}}</option>
												{% endfor %}
											</select>
										</div>
										<div class="d-flex justify-content-between">
											<button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-dismiss="modal">
												Back
											</button>
											<button type="submit" class="btn btn-primary">Saved</button>
										</div>
									</form>
									
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ingresar Document -->
					<div class="modal fade" id="modalDocument" tabindex="-1" aria-labelledby="modalDocumentLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalIngresarTextoLabel">Upload Document </h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<div class="card">
										<div class="card-body">
											<form  method="POST" enctype="multipart/form-data">
												{% csrf_token %}
												<input type="file" id="pdfUploader" name="documents" multiple>
												<div id="fileNamesContainer"></div>												
												<button id="loadDocument" type="submit" class="btn" data-upload-url="{% url 'saveDocumentClientSupp' supps.id %}" > <i class="fa-solid fa-floppy-disk"></i></button>
											</form>
										</div>
									</div>

									<div id="loader" class="loader-overlay">
										<div class="loader"></div>
										<p>Uploading files, please wait...</p>
									</div>
									
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver las Document -->
					<div class="modal fade" id="verDocument" tabindex="-1" aria-labelledby="verDocument" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verDocument">Saved documents</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if document or documentSupp%}
										<ul class="list-group">

											{% if document %} <h5>Documents Consent</h5> {% endif %}

											{% for documents in document %}													
												<li class="list-group-item">
													<strong>Documents Consent #{{forloop.counter}}:</strong> <a href="{{ documents.file.url }}" target="_blank" >View  <i class="lni lni-display"></i></a> 
												</li>
											{% endfor %}

											{% if document and documentSupp %} <hr> {% endif %}

											{% if documentSupp %} <h5>Documents Upload CRM</h5> {% endif %}

											{% for documents in documentSupp %}															
												<li class="list-group-item">
													<strong>{{documents.name}}:</strong> <a href="{{ documents.file.url }}" target="_blank" >View  <i class="lni lni-display"></i></a> 
												</li>
											{% endfor %}

										</ul>
									{% else %}
										<p>No Documents.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver las Document -->
					<div class="modal fade" id="verCignaSuplemental" tabindex="-1" aria-labelledby="verCignaSuplemental" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verCignaSuplemental">Saved documents Cigna Supplemental</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if document or cignaSuplemental%}
										<ul class="list-group">

											{% for documents in cignaSuplemental %}															
												<li class="list-group-item">
													<strong>{{documents.pdf}}:</strong> <a href="{{ documents.pdf.url }}" target="_blank" >View  <i class="lni lni-display"></i></a> 
												</li>
											{% endfor %}

										</ul>
									{% else %}
										<p>No Documents.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					
				</div>
            </div>
        </div>
    </div>
</div>

{% if smsIsActive %}
<!-- Chat UI -->
<div id='floating-chat' {% if userPreference.darkMode %} class='dark-mode'{% endif %}>
	<button class="floating-chat-button flex-grow-1" onclick="toggleChat()">
		<i class="lni lni-comments-alt"></i>
		{% if chat.is_message_unread %}<span class="alert-count">{{ chat.unread_messages }}</span>{% endif %}
	</button>
    
	<div class="floating-chat-container" id="chatContainer">
		<div class="floating-chat-header">
			<span class="client-name">{{contact.name}} <br>{{contact.formatted_phone_number}}</span>
			<div class="chat-actions">
				{% if secretKey %}
				<button id="buttonSendSecretKey" class="tooltip-container"><span class="tooltip-text">Send Secret Key</span><i class="bx bx-key me-1"></i></button>
				{% else %}
				<button id="buttonCreateSecretKey" class="tooltip-container"><span class="tooltip-text">Create Secret Key</span><i class="bx bx-key me-1"></i></button>
				{% endif %}
			</div>
		</div>
		<div class="floating-chat-body" id="chat-content">
			{% if not messages %}
				<div class="d-flex justify-content-center align-items-center" id="buttonStartChat">
					<div class="dropdown">
						<button class="btn btn-primary dropdown-toggle custom-dropdown" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
							🌍 Select Language
						</button>
						<ul class="dropdown-menu animate-dropdown" aria-labelledby="languageDropdown">
							<li><a class="dropdown-item" href="#" onclick="setLanguage('english')">🇺🇸 English</a></li>
							<li><a class="dropdown-item" href="#" onclick="setLanguage('spanish')">🇪🇸 Español</a></li>
						</ul>
					</div>
				</div>
			{% else %}
				{% for message in messages %}
					{%if message.sender_type == 'Client'%}
						<div class="chat-content-leftside">
							<div class="d-flex">
								<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" viewBox="0 0 24 24" fill="none" stroke="currentColor"
									stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user">
									<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
									<circle cx="12" cy="7" r="4"></circle>
								</svg>
								<div class="flex-grow-1 ms-2">
									<p class="mb-0 chat-time">{{obamacare.client.first_name}}, {{message.created_at|date:"g:i A"}}</p>
									{% if message.file %}
									<p class="chat-left-msg">
										<img class="img-responsive" src="{{ message.file.file.url }}" alt="">
									</p>
									{% else %}
									<p class="chat-left-msg" style="white-space: pre-wrap;">{{message.message_content}}</p>
									{% endif %}
								</div>
							</div>
						</div>
					{%elif message.sender_type == 'Agent'%}
						<div class="chat-content-rightside">
							<div class="d-flex ms-auto">
								<div class="flex-grow-1 me-2">
									<p class="mb-0 chat-time text-end">{{message.sender.username}}, {{ message.created_at|date:"m:H - d/m" }}</p>
									{% if message.file %}
									<p class="chat-left-msg">
										<img class="img-responsive" src="{{ message.file.file.url }}" alt="">
									</p>
									{% else %}
									<p class="chat-right-msg">{{message.message_content|linebreaksbr}}</p>
									{% endif %}
								</div>
							</div>
						</div>
					{% endif %}
				{% endfor %}				
			{% endif %}
		</div>
		<div class="floating-chat-footer">
			<input {% if not contact.is_active %}disabled{% endif %} type="text" id="messageContent" placeholder="Type a message...">
			<button id="sendMessage">Send</button>
		</div>
	</div>
</div>
{% endif %}

{% endblock %}
{% block end_js %}
	<!-- Bootstrap JS -->
	<script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>

	<!--plugins-->
	<script src="{% static 'assets/js/jquery.min.js' %}"></script>
	<script src="{% static 'assets/plugins/simplebar/js/simplebar.min.js' %}"></script>
	<script src="{% static 'assets/plugins/metismenu/js/metisMenu.min.js' %}"></script>
	<script src="{% static 'assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js' %}"></script>
	<script src="{% static 'assets/plugins/datatable/js/jquery.dataTables.min.js' %}"></script>
	<script src="{% static 'assets/plugins/datatable/js/dataTables.bootstrap5.min.js' %}"></script>

	<!-- Agregar Flatpickr -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	
	<!-- Incluir JS de Choices.js -->
	<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

	<link href="https://unpkg.com/filepond/dist/filepond.min.css" rel="stylesheet">
	<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>
	<script src="https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.min.js"></script>

	<!--app JS-->
	<script src="{% static 'assets/js/app.js' %}"></script>
	<script src="{% static 'assets/js/validations/blockSocial.js' %}"></script>
	<script src="{% static 'assets/js/validations/validationZicode.js' %}"></script>
	<script src="{% static 'assets/js/validations/editSupp.js' %}"></script>
	<script src="{% static 'assets/js/payments/paymentDateSupp.js' %}"></script>
	<script src="{% static 'assets/js/payments/fetchPayments.js' %}"></script>
	<script src="{% static 'assets/js/validations/saveDocumentObama.js' %}" defer></script>	

	<!-- Scripts SMS's -->
	<script>
		var obamacare_id = '{{obamacare.id}}'
		var supp_id = '{{ supps.id }}'
		var company_id = '{{request.user.company.id}}'
		var username = '{{request.user.username}}'
		var contact_id = '{{contact.id}}'
		var chat_id = '{{ contact.phone_number }}'
		var chat_name = '{{ contact.name }}'
		var	is_message_unread = '{{chat.is_message_unread}}'.toLowerCase() === "true";
	</script>
	<script src="{% static 'assets/js/sms/scripts.js' %}"></script>
{% endblock %}