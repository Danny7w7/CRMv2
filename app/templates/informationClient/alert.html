{% extends "dashboard/index.html" %}
{% load static %}
{% block head %}
    <title>Table Alert</title>
	<!--plugins-->
	<link href="{% static "assets/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/metismenu/css/metisMenu.min.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/datatable/css/dataTables.bootstrap5.min.css" %}" rel="stylesheet" />
	<!-- loader-->
	<link href="{% static "assets/css/pace.min.css" %}" rel="stylesheet" />
	<script src="{% static "assets/js/pace.min.js" %}"></script>
	<!-- Bootstrap CSS -->
	<link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/bootstrap-extended.css" %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&amp;display=swap" rel="stylesheet">
	<link href="{% static "assets/css/app.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/icons.css" %}" rel="stylesheet">
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="{% static "assets/css/dark-theme.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/semi-dark.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/header-colors.css" %}" />

	<!--plugins-->
	<link href="{% static "assets/plugins/fullcalendar/css/main.min.css" %}" rel="stylesheet" />

{% endblock %}
{% block page_content %}
<h6 class="mb-0 text-uppercase">Alert calendar</h6>

<hr/>

<div class="card">
    <div class="card-body">
		<div class="table-responsive">
			<div id='calendar'></div>
		</div>
    </div>
</div>

<!-- Modal para mostrar detalles del evento -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="eventModalLabel">Details Alert</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Client:</strong> <span id="modal-client-name"></span></p>
				<p><strong>Phone:</strong> <span id="modal-client-phone"></span></p>
                <p><strong>Agent:</strong> <span id="modal-agent-name"></span></p>
                <p><strong>Date:</strong> <span id="modal-date"></span></p>
                <p><strong>Time:</strong> <span id="modal-time"></span></p>
                <p><strong>Observation:</strong> <span id="modal-content"></span></p>
                {% if user_role == 'Admin' %}
                <p><strong>Status:</strong> <span id="modal-status"></span></p>
                {% endif %}
                {% if is_superuser %}
                <p><strong>Company:</strong> <span id="modal-company"></span></p>
                {% endif %}
            </div>
            <div class="modal-footer">
				<a href="#" id="asistio-link" class="btn btn-warning">
					<i class='bx bxs-calendar-check'></i> Check 
				</a>
                <a href="#" id="edit-link" class="btn btn-primary">
                    <i class='bx bxs-edit'></i> Edit
                </a>
                <a href="#" id="toggle-link" class="btn btn-danger">
                    <i class='bx bxs-trash'></i> Toggle
                </a>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}
{% block end_js %}
	<!-- Bootstrap JS -->
	<script src="{% static "assets/js/bootstrap.bundle.min.js" %}"></script>
	<!--plugins-->
	<script src="{% static "assets/js/jquery.min.js" %}"></script>
	<script src="{% static "assets/plugins/simplebar/js/simplebar.min.js" %}"></script>
	<script src="{% static "assets/plugins/metismenu/js/metisMenu.min.js" %}"></script>
	<script src="{% static "assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/jquery.dataTables.min.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/dataTables.bootstrap5.min.js" %}"></script>

	<!--app JS-->
	<script src="{% static "assets/js/app.js" %}"></script>

	<script src="{% static "assets/plugins/fullcalendar/js/main.min.js"%}"></script>
	<script src="{% static "assets/plugins/fullcalendar/js/configurationCalendario.js"%}"></script>
	


	<script>
    	// Inicializar el calendario con los datos de Django
		window.initCalendar(
			{{ events_json|safe }},
			"{{ user_role }}",
			{{ is_superuser|yesno:"true,false" }}
		);
	</script>

{% endblock %}